redis:
  enabled: true
  architecture: standalone
  master:
    persistence:
      enabled: false
  auth:
    enabled: true
    password: peertube

minio:
  enabled: true
  mode: standalone
  replicas: 1
  rootUser: peertube
  rootPassword: peertube
  persistence:
    enabled: false
    size: 1Gi
  # login issue with port-forward: https://github.com/minio/console/issues/2539
  environment:
    MINIO_BROWSER_LOGIN_ANIMATION: "off"
    MINIO_DOMAIN: default.svc.cluster.local
  resources:
    requests:
      memory: 256Mi
      cpu: 250m
  service:
    port: 8080
  users:
    - accessKey: 1234qwer
      secretKey: 1234qwer
      policy: readwrite
  buckets:
    - name: peertube-web
      policy: none
    - name: peertube-hls
      policy: none

  ingress:
    enabled: true
    annotations:
      kubernetes.io/ingressClassName: nginx
    path: /
    hosts:
      - peertube-web.default.svc.cluster.local
      - peertube-hls.default.svc.cluster.local

postgresql:
  enabled: true
  image:
    tag: 12.16.0-debian-11-r5
  auth:
    postgresPassword: peertube
    username: peertube
    password: peertube
    database: peertube
  primary:
    initdb:
      user: postgres
      password: peertube
      scripts:
        01_create_extensions.sql: |
          CREATE EXTENSION pg_trgm;
          CREATE EXTENSION unaccent;

ingress:
  enabled: true
  annotations:
    kubernetes.io/ingress.class: nginx
    nginx.ingress.kubernetes.io/proxy-body-size: "0"
    nginx.ingress.kubernetes.io/proxy-read-timeout: "3600"
  hosts:
    - host: peertube.default.svc.cluster.local
      paths:
        - path: /
          pathType: Prefix